<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

<section>
    <div class="list-body">
        <h1 class="tdlst-main-title">To Do List</h1>
        <div class="titlebar">
            <div class="flex-to-row">
                <input class="task-create-title-input" type="text" [(ngModel)]="selectedTask.task_title" placeholder="Title">
                <div class="align-btn-to-r">
                    <button (click)="createTask(selectedTask)">Save</button>
                    <button (click)="refreshTasks()">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    <br>
    <div class="list-body">
        <div *ngFor="let item of task" class="task-body" id="task-{{item.id}}">
            <div class="titlebar">
                <div class="task-mainicon task-notdone" *ngIf="item.task_completion == false" (click)="markAsDone(item)">
                    <span class="material-symbols-outlined">radio_button_unchecked</span>
                </div>
                <div class="task-mainicon task-done" *ngIf="item.task_completion == true" (click)="markAsNotDone(item)">
                    <span class="material-symbols-outlined">radio_button_checked</span>
                </div>
                <div>
                    <div class="task-title flex-to-column">
                        <span class="task-title-para">{{item.task_title}}</span>
                        <input class="task-title-input" type="text" [(ngModel)]="item.task_title" placeholder="Title">
                    </div>
                </div>
                <div class="task-sideicon taskicon-edit" (click)="showTaskDetails(item.id)">
                    <span class="material-symbols-outlined">edit_note</span>
                </div>
                <div class="task-sideicon taskicon-closeedit" (click)="hideTaskDetails(item.id)">
                    <span class="material-symbols-outlined">edit_note</span>
                </div>
                <div class="task-sideicon taskicon-delete" (click)="deleteTask(item)">
                    <span class="material-symbols-outlined">delete</span>
                </div>
            </div>
            <div class="task-details">
                <input class="task-desc-input" type="text" [(ngModel)]="item.task_description" placeholder="Description">
                <div class="flex-to-row">
                    <p>Created at: {{item.task_created_at}}</p>
                    <p>Updated at: {{item.task_updated_at}}</p>
                </div>
                <div class="flex-to-row">
                    <button (click)="editTaskBody(item)">Save</button>
                    <button (click)="cancelEditTaskBody(item)">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    <br>
    <div class="list-body">
        <div class="ending">
            <p>
                Made by GSacata.
            </p>
        </div>
    </div>
</section>